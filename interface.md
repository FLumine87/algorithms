# 日程管理系统 - 新版接口文档

## 基础信息

- **基础URL**: `/api/v1`
- **认证方式**: Token认证（请求头需加 `Authorization: Bearer {token}`）
- **日期格式**: YYYY-MM-DD
- **时间格式**: HH:mm (24小时制)
- **时间段格式**: HH:mm-HH:mm
- **完整时间戳**: ISO 8601

---

## 1. 用户认证模块

### 1.1 用户登录

#### 1.1.1 基本信息
- 接口地址: `/auth/login`
- 请求方法: POST
- 接口描述：用户登录，获取token和用户信息

#### 1.1.2 请求参数

参数说明：
| 参数名   | 类型   | 是否必须 | 备注   |
|----------|--------|----------|--------|
| username | string | 必须     | 用户名 |
| password | string | 必须     | 密码   |

#### 1.1.3 响应数据
- **响应示例**:
```json
{
  "code": 200,
  "message": "登录成功",
  "data": {
    "token": "jwt_token_string",
    "user": {
      "id": 1,
      "username": "user123",
      "nickname": "学生用户",
      "avatar": "https://example.com/avatar.png",
      "gender": "男",
      "school": "XX大学"
    }
  }
}
```

### 1.2 用户注册

#### 1.2.1 基本信息
- 接口地址: `/auth/register`
- 请求方法: POST
- 接口描述：用户注册

#### 1.2.2 请求参数

参数说明：
| 参数名          | 类型   | 是否必须 | 备注     |
|-----------------|--------|----------|----------|
| username        | string | 必须     | 用户名   |
| password        | string | 必须     | 密码     |
| confirmPassword | string | 必须     | 确认密码 |

#### 1.2.3 响应数据
- **响应示例**:
```json
{
  "code": 200,
  "message": "注册成功",
  "data": null
}
```

### 1.3 退出登录

#### 1.3.1 基本信息
- 接口地址: 无（前端清除token即可）
- 请求方法: 无
- 接口描述：前端调用 `api.auth.logout()`，仅清除本地token，不与后端交互

---

## 2. 日程管理模块

### 2.1 获取日程列表

#### 2.1.1 基本信息
- 接口地址: `/schedules`
- 请求方法: GET
- 接口描述：获取指定日期的日程列表

#### 2.1.2 请求参数

参数说明：
| 参数名 | 类型   | 是否必须 | 备注                       |
|--------|--------|----------|----------------------------|
| date   | string | 可选     | 查询指定日期的日程 (格式: YYYY-MM-DD) |

#### 2.1.3 响应数据
- **响应示例**:
```json
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "event": "团队会议",
      "date": "2024-01-15",
      "time": "14:00",
      "location": "会议室A",
      "people": "张三、李四",
      "priority": "important-urgent",
      "userId": 1
    }
  ]
}
```

### 2.2 创建日程

#### 2.2.1 基本信息
- 接口地址: `/schedules`
- 请求方法: POST
- 接口描述：创建新的日程

#### 2.2.2 请求参数

参数说明：
| 参数名   | 类型   | 是否必须 | 备注             |
|----------|--------|----------|------------------|
| event    | string | 必须     | 事件名称         |
| date     | string | 必须     | 日期 (YYYY-MM-DD)|
| time     | string | 必须     | 时间 (HH:mm)     |
| location | string | 可选     | 地点             |
| people   | string | 可选     | 参与人           |
| priority | string | 必须     | 优先级           |

- 优先级枚举值:
    - `important-urgent`
    - `important-not-urgent`
    - `not-important-urgent`
    - `not-important-not-urgent`

#### 2.2.3 响应数据
- **响应示例**:
```json
{
  "code": 200,
  "message": "创建成功",
  "data": {
    "id": 2,
    "event": "新事件",
    "date": "2024-01-16",
    "time": "10:00",
    "location": "会议室B",
    "people": "王五",
    "priority": "important-not-urgent",
    "userId": 1
  }
}
```

### 2.3 更新日程

#### 2.3.1 基本信息
- 接口地址: `/schedules/{id}`
- 请求方法: PUT
- 接口描述：更新指定ID的日程

#### 2.3.2 请求参数

参数说明：
| 参数名   | 类型   | 是否必须 | 备注             |
|----------|--------|----------|------------------|
| event    | string | 必须     | 事件名称         |
| date     | string | 必须     | 日期 (YYYY-MM-DD)|
| time     | string | 必须     | 时间 (HH:mm)     |
| location | string | 可选     | 地点             |
| people   | string | 可选     | 参与人           |
| priority | string | 必须     | 优先级           |

#### 2.3.3 响应数据
同创建日程

### 2.4 删除日程

#### 2.4.1 基本信息
- 接口地址: `/schedules/{id}`
- 请求方法: DELETE
- 接口描述：删除指定ID的日程

#### 2.4.2 请求参数

参数说明：无

#### 2.4.3 响应数据
- **响应示例**:
```json
{
  "code": 200,
  "message": "删除成功"
}
```

---

## 3. 课程管理模块

### 3.1 获取课程列表

#### 3.1.1 基本信息
- 接口地址: `/courses`
- 请求方法: GET
- 接口描述：获取课程列表

#### 3.1.2 请求参数

参数说明：
| 参数名 | 类型   | 是否必须 | 备注             |
|--------|--------|----------|------------------|
| date   | string | 可选     | 查询指定日期的课程 |
| week   | number | 可选     | 查询指定周次的课程 |

#### 3.1.3 响应数据
- **响应示例**:
```json
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "name": "高等数学",
      "date": "2024-01-15",
      "time": "08:00-09:40",
      "location": "教学楼A101",
      "teacher": "张教授",
      "weeks": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16],
      "notes": "期中考试在第8周",
      "userId": 1
    }
  ]
}
```

### 3.2 创建课程

#### 3.2.1 基本信息
- 接口地址: `/courses`
- 请求方法: POST
- 接口描述：创建新课程

#### 3.2.2 请求参数

参数说明：
| 参数名   | 类型   | 是否必须 | 备注         |
|----------|--------|----------|--------------|
| name     | string | 必须     | 课程名称     |
| date     | string | 必须     | 日期         |
| time     | string | 必须     | 时间段       |
| location | string | 必须     | 地点         |
| teacher  | string | 必须     | 教师         |
| weeks    | array  | 必须     | 周次数组     |
| notes    | string | 可选     | 备注         |

- 时间段枚举值:
    - `08:00-09:40`
    - `10:00-11:40`
    - `14:00-15:40`
    - `16:00-17:40`
    - `19:00-20:40`

#### 3.2.3 响应数据
- **响应示例**:
```json
{
  "code": 200,
  "message": "创建成功",
  "data": {
    "id": 2,
    "name": "英语",
    "date": "2024-01-16",
    "time": "10:00-11:40",
    "location": "教学楼B201",
    "teacher": "李老师",
    "weeks": [2, 4, 6, 8],
    "notes": "",
    "userId": 1
  }
}
```

### 3.3 更新课程

#### 3.3.1 基本信息
- 接口地址: `/courses/{id}`
- 请求方法: PUT
- 接口描述：更新指定ID的课程

#### 3.3.2 请求参数

参数说明：
| 参数名   | 类型   | 是否必须 | 备注         |
|----------|--------|----------|--------------|
| name     | string | 必须     | 课程名称     |
| date     | string | 必须     | 日期         |
| time     | string | 必须     | 时间段       |
| location | string | 必须     | 地点         |
| teacher  | string | 必须     | 教师         |
| weeks    | array  | 必须     | 周次数组     |
| notes    | string | 可选     | 备注         |

#### 3.3.3 响应数据
同创建课程

### 3.4 删除课程

#### 3.4.1 基本信息
- 接口地址: `/courses/{id}`
- 请求方法: DELETE
- 接口描述：删除指定ID的课程

#### 3.4.2 请求参数

参数说明：无

#### 3.4.3 响应数据
- **响应示例**:
```json
{
  "code": 200,
  "message": "删除成功"
}
```

---

## 4. 笔记管理模块

### 4.1 获取笔记列表

#### 4.1.1 基本信息
- 接口地址: `/notes`
- 请求方法: GET
- 接口描述：获取笔记列表

#### 4.1.2 请求参数

参数说明：无

#### 4.1.3 响应数据
- **响应示例**:
```json
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "title": "项目会议记录",
      "content": "讨论了项目进度和下一步计划...",
      "createdAt": "2024-01-15T10:00:00Z",
      "updatedAt": "2024-01-15T10:00:00Z",
      "userId": 1
    }
  ]
}
```

### 4.2 创建笔记

#### 4.2.1 基本信息
- 接口地址: `/notes`
- 请求方法: POST
- 接口描述：创建新笔记

#### 4.2.2 请求参数

参数说明：
| 参数名 | 类型   | 是否必须 | 备注     |
|--------|--------|----------|----------|
| title  | string | 必须     | 笔记标题 |
| content| string | 必须     | 笔记内容 |

#### 4.2.3 响应数据
- **响应示例**:
```json
{
  "code": 200,
  "message": "创建成功",
  "data": {
    "id": 2,
    "title": "新笔记",
    "content": "内容",
    "createdAt": "2024-01-16T10:00:00Z",
    "updatedAt": "2024-01-16T10:00:00Z",
    "userId": 1
  }
}
```

### 4.3 更新笔记

#### 4.3.1 基本信息
- 接口地址: `/notes/{id}`
- 请求方法: PUT
- 接口描述：更新指定ID的笔记

#### 4.3.2 请求参数

参数说明：
| 参数名 | 类型   | 是否必须 | 备注     |
|--------|--------|----------|----------|
| title  | string | 必须     | 笔记标题 |
| content| string | 必须     | 笔记内容 |

#### 4.3.3 响应数据
同创建笔记

### 4.4 删除笔记

#### 4.4.1 基本信息
- 接口地址: `/notes/{id}`
- 请求方法: DELETE
- 接口描述：删除指定ID的笔记

#### 4.4.2 请求参数

参数说明：无

#### 4.4.3 响应数据
- **响应示例**:
```json
{
  "code": 200,
  "message": "删除成功"
}
```

---

## 5. 提醒管理模块

### 5.1 获取活跃提醒

#### 5.1.1 基本信息
- 接口地址: `/reminders/active`
- 请求方法: GET
- 接口描述：获取活跃提醒列表

#### 5.1.2 请求参数

参数说明：无

#### 5.1.3 响应数据
- **响应示例**:
```json
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "event": "团队会议",
      "reminderTime": "2024-01-15T13:50:00Z",
      "scheduleId": 1,
      "userId": 1
    }
  ]
}
```

### 5.2 创建提醒

#### 5.2.1 基本信息
- 接口地址: `/reminders`
- 请求方法: POST
- 接口描述：创建新提醒

#### 5.2.2 请求参数

参数说明：
| 参数名      | 类型   | 是否必须 | 备注               |
|-------------|--------|----------|--------------------|
| event       | string | 必须     | 事件名称           |
| reminderTime| string | 必须     | 提醒时间 (ISO 8601)|
| scheduleId  | number | 可选     | 关联的日程ID       |

#### 5.2.3 响应数据
- **响应示例**:
```json
{
  "code": 200,
  "message": "创建成功",
  "data": {
    "id": 2,
    "event": "新提醒",
    "reminderTime": "2024-01-16T09:50:00Z",
    "scheduleId": 2,
    "userId": 1
  }
}
```

### 5.3 取消提醒

#### 5.3.1 基本信息
- 接口地址: `/reminders/{id}`
- 请求方法: DELETE
- 接口描述：取消指定ID的提醒

#### 5.3.2 请求参数

参数说明：无

#### 5.3.3 响应数据
- **响应示例**:
```json
{
  "code": 200,
  "message": "删除成功"
}
```

---

## 6. 用户信息模块

### 6.1 获取用户信息

#### 6.1.1 基本信息
- 接口地址: `/user/profile`
- 请求方法: GET
- 接口描述：获取当前用户信息

#### 6.1.2 请求参数

参数说明：无

#### 6.1.3 响应数据
- **响应示例**:
```json
{
  "code": 200,
  "data": {
    "id": 1,
    "username": "user123",
    "nickname": "学生用户",
    "avatar": "https://example.com/avatar.png",
    "gender": "男",
    "school": "XX大学"
  }
}
```

### 6.2 更新用户信息

#### 6.2.1 基本信息
- 接口地址: `/user/profile`
- 请求方法: PUT
- 接口描述：更新当前用户信息

#### 6.2.2 请求参数

参数说明：
| 参数名  | 类型   | 是否必须 | 备注   |
|---------|--------|----------|--------|
| nickname| string | 可选     | 昵称   |
| gender  | string | 可选     | 性别   |
| school  | string | 可选     | 学校   |

#### 6.2.3 响应数据
- **响应示例**:
```json
{
  "code": 200,
  "message": "更新成功",
  "data": {
    "id": 1,
    "username": "user123",
    "nickname": "新昵称",
    "avatar": "https://example.com/avatar.png",
    "gender": "女",
    "school": "YY大学"
  }
}
```

### 6.3 上传头像

#### 6.3.1 基本信息
- 接口地址: `/user/avatar`
- 请求方法: POST
- 请求类型: multipart/form-data
- 接口描述：上传用户头像

#### 6.3.2 请求参数

参数说明：
| 参数名 | 类型 | 是否必须 | 备注     |
|--------|------|----------|----------|
| avatar | file | 必须     | 头像文件 |

#### 6.3.3 响应数据
- **响应示例**:
```json
{
  "code": 200,
  "data": {
    "avatarUrl": "https://example.com/upload/avatar_123.png"
  }
}
```

---

## 7. 其它说明

### 7.1 错误码说明  
|错误码|说明|
|---|---|
|200|成功|
|400|请求参数错误|
|401|未授权|
|403|禁止访问|
|404|资源不存在|
|500|服务器内部错误|

### 7.2 分页与排序  
列表接口建议支持 `page`、`pageSize`、`sortBy`、`sortOrder` 参数。

### 7.3 安全要求  
1. 除登录、注册外所有接口需Token认证  
2. 密码加密传输和存储  
3. 用户只能访问自己的数据  
4. 文件上传需验证类型和大小  
5. 敏感操作需日志记录

### 7.4 文件上传限制  
最大2MB，支持JPG/PNG，建议头像100x100像素

---

**本接口文档适用于新版前端（aa.html）和新版API服务（api.js），与原接口文档保持兼容。**