## å®šä¹‰[](https://oi-wiki.org/basic/bucket-sort/#%E5%AE%9A%E4%B9%89 "Permanent link")

æ¡¶æ’åºï¼ˆè‹±æ–‡ï¼šBucket sortï¼‰æ˜¯æ’åºç®—æ³•çš„ä¸€ç§ï¼Œé€‚ç”¨äºå¾…æ’åºæ•°æ®å€¼åŸŸè¾ƒå¤§ä½†åˆ†å¸ƒæ¯”è¾ƒå‡åŒ€çš„æƒ…å†µã€‚

## è¿‡ç¨‹[](https://oi-wiki.org/basic/bucket-sort/#%E8%BF%87%E7%A8%8B "Permanent link")

æ¡¶æ’åºæŒ‰ä¸‹åˆ—æ­¥éª¤è¿›è¡Œï¼š

1. è®¾ç½®ä¸€ä¸ªå®šé‡çš„æ•°ç»„å½“ä½œç©ºæ¡¶ï¼›
2. éå†åºåˆ—ï¼Œå¹¶å°†å…ƒç´ ä¸€ä¸ªä¸ªæ”¾åˆ°å¯¹åº”çš„æ¡¶ä¸­ï¼›
3. å¯¹æ¯ä¸ªä¸æ˜¯ç©ºçš„æ¡¶è¿›è¡Œæ’åºï¼›
4. ä»ä¸æ˜¯ç©ºçš„æ¡¶é‡ŒæŠŠå…ƒç´ å†æ”¾å›åŸæ¥çš„åºåˆ—ä¸­ã€‚

## æ€§è´¨[](https://oi-wiki.org/basic/bucket-sort/#%E6%80%A7%E8%B4%A8 "Permanent link")

### ç¨³å®šæ€§[](https://oi-wiki.org/basic/bucket-sort/#%E7%A8%B3%E5%AE%9A%E6%80%A7 "Permanent link")

å¦‚æœä½¿ç”¨ç¨³å®šçš„å†…å±‚æ’åºï¼Œå¹¶ä¸”å°†å…ƒç´ æ’å…¥æ¡¶ä¸­æ—¶ä¸æ”¹å˜å…ƒç´ é—´çš„ç›¸å¯¹é¡ºåºï¼Œé‚£ä¹ˆæ¡¶æ’åºå°±æ˜¯ä¸€ç§ç¨³å®šçš„æ’åºç®—æ³•ã€‚

ç”±äºæ¯å—å…ƒç´ ä¸å¤šï¼Œä¸€èˆ¬ä½¿ç”¨æ’å…¥æ’åºã€‚æ­¤æ—¶æ¡¶æ’åºæ˜¯ä¸€ç§ç¨³å®šçš„æ’åºç®—æ³•ã€‚

### æ—¶é—´å¤æ‚åº¦[](https://oi-wiki.org/basic/bucket-sort/#%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6 "Permanent link")

æ¡¶æ’åºçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸ºÂ ğ‘‚(ğ‘›Â +ğ‘›2/ğ‘˜Â +ğ‘˜)![](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 "O(n + n^2/k + k)")ï¼ˆå°†å€¼åŸŸå¹³å‡åˆ†æˆÂ ğ‘›![](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 "n")Â å— + æ’åº + é‡æ–°åˆå¹¶å…ƒç´ ï¼‰ï¼Œå½“Â ğ‘˜Â â‰ˆğ‘›![](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 "k\approx n")Â æ—¶ä¸ºÂ ğ‘‚(ğ‘›)![](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 "O(n)")ã€‚[1](https://oi-wiki.org/basic/bucket-sort/#fn:ref1)

æ¡¶æ’åºçš„æœ€åæ—¶é—´å¤æ‚åº¦ä¸ºÂ ğ‘‚(ğ‘›2)![](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 "O(n^2)")ã€‚

## å®ç°[](https://oi-wiki.org/basic/bucket-sort/#%E5%AE%9E%E7%8E%B0 "Permanent link")
```cpp
constexpr int N = 100010;

int n, w, a[N];
vector<int> bucket[N];

void insertion_sort(vector<int>& A) {
  for (int i = 1; i < A.size(); ++i) {
    int key = A[i];
    int j = i - 1;
    while (j >= 0 && A[j] > key) {
      A[j + 1] = A[j];
      --j;
    }
    A[j + 1] = key;
  }
}

void bucket_sort() {
  int bucket_size = w / n + 1;
  for (int i = 0; i < n; ++i) {
    bucket[i].clear();
  }
  for (int i = 1; i <= n; ++i) {
    bucket[a[i] / bucket_size].push_back(a[i]);
  }
  int p = 0;
  for (int i = 0; i < n; ++i) {
    insertion_sort(bucket[i]);
    for (int j = 0; j < bucket[i].size(); ++j) {
      a[++p] = bucket[i][j];
    }
  }
}
```