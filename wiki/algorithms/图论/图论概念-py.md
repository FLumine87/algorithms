## 一、图的基本概念（Basic Concepts of Graph）

### 1. **图的定义**
- 图是一种数据结构，由**顶点（Vertex）** 和**边（Edge）** 组成。
- 用来表示对象之间的成对关系，如航班网络、公路网络、电子电路、社交网络等。

### 2. **图的类型**
| 分类维度 | 类型  | 说明                    |
| ---- | --- | --------------------- |
| 边的方向 | 无向图 | 边无方向，表示对称关系（如合作、友谊）   |
|      | 有向图 | 边有方向，表示单向关系（如航班、网页链接） |
| 边的权重 | 无权图 | 边无权重                  |
|      | 加权图 | 边有权重（如距离、时间、成本）       |
| 边的关系 | 简单图 | 无平行边、无自环              |
|      | 多重图 | 允许平行边、自环              |

### 3. **图的基本术语**
- **端点（End vertices）**：一条边连接的两个顶点。
- **起点与终点（Origin / Destination）**：有向边的起点和终点。
- **相邻（Adjacency）**：两个顶点之间有边连接。
- **关联（Incidence）**：边与顶点相连。
- **出边 / 入边**：有向图中，从一个顶点出发的边为出边，指向该顶点的边为入边。
- **度（Degree）**：
  - 无向图：顶点的关联边数。
  - 有向图：
    - 入度（in-degree）：指向该顶点的边数。
    - 出度（out-degree）：从该顶点出发的边数。
    - 总度数 = 入度 + 出度。

### 4. **路径与连通性**
- **路径（Path）**：一系列相邻顶点和边构成的序列。
- **简单路径（Simple path）**：所有顶点不重复的路径。
- **环（Cycle）**：起点与终点相同的路径。
- **可达性（Reachability）**：从顶点 $u$ 到 $v$ 存在路径。
- **连通图（Connected Graph）**：无向图中任意两顶点都可达。
- **强连通图（Strongly Connected Graph）**：有向图中任意两顶点互相可达。

### 5. **子图与特殊图**
- **子图（Subgraph）**：顶点和边都是原图的子集。
- **生成子图（Spanning Subgraph）**：包含原图所有顶点的子图。
- **连通分量（Connected Component）**：无向图中的极大连通子图。
- **森林（Forest）**：无环图。
- **树（Tree）**：连通的森林，是图的一种特殊形式。
- **生成树（Spanning Tree）**：包含所有顶点的树形子图。

### 6. **图的性质（重要公式）**
- 无向图：  
  $$
  \sum_{v \in V} \deg(v) = 2m
  $$
- 有向图：  
  $$
  \sum_{v \in V} \text{in-deg}(v) = \sum_{v \in V} \text{out-deg}(v) = m
  $$
- 简单图最大边数：
  - 无向图：$m \leq \frac{n(n-1)}{2}$
  - 有向图：$m \leq n(n-1)$
- 树的性质：
  - 连通图：$m \geq n-1$
  - 树：$m = n-1$
  - 森林：$m \leq n-1$

---

## 二、图的抽象数据类型（Graph ADT）

### 1. **基本元素**
- **Vertex**：存储用户数据（如机场代码）。
- **Edge**：存储用户数据（如航班号、距离），并提供：
  - `endpoints()`：返回起点和终点。
  - `opposite(v)`：返回边的另一端点。

### 2. **图的基本操作**
| 方法 | 功能 |
|------|------|
| `vertex_count()` | 返回顶点数 |
| `vertices()` | 返回所有顶点的迭代器 |
| `edge_count()` | 返回边数 |
| `edges()` | 返回所有边的迭代器 |
| `get_edge(u, v)` | 返回边（如果存在） |
| `degree(v)` | 返回顶点的度（有向图可指定入/出） |
| `incident_edges(v)` | 返回所有关联边 |
| `insert_vertex(x)` | 插入顶点 |
| `insert_edge(u, v, x)` | 插入边 |
| `remove_vertex(v)` | 删除顶点及关联边 |
| `remove_edge(e)` | 删除边 |

---

## 三、图的存储结构（Data Structures for Graphs）

### 1. **邻接矩阵（Adjacency Matrix）**
- 使用 $n \times n$ 矩阵，`A[i][j]` 表示顶点 $i$ 到 $j$ 是否有边（或权重）。
- **优点**：
  - 查找边是否存在的复杂度：$O(1)$
- **缺点**：
  - 空间复杂度：$O(n^2)$，不适合稀疏图。
  - 插入/删除顶点代价高：$O(n^2)$。

### 2. **邻接表（Adjacency List）**
- 每个顶点维护一个列表，存储其所有邻接顶点。
- **优点**：
  - 空间复杂度：$O(n + m)$，适合稀疏图。
  - 插入/删除顶点较快。
- **缺点**：
  - 查找边是否存在：$O(\min(\deg(u), \deg(v)))$。

### 3. **邻接映射（Adjacency Map）**
- 类似邻接表，但用字典（哈希表）存储邻接关系，可以更快查找边。

### 4. **边列表（Edge List）**
- 简单存储所有边的列表，适合边数少、操作简单的场景。

---

## 四、时间复杂度对比

### 邻接矩阵：
| 操作 | 时间复杂度 |
|------|------------|
| `get_edge(u, v)` | $O(1)$ |
| `insert_edge` | $O(1)$ |
| `insert_vertex` | $O(n^2)$ |
| `remove_vertex` | $O(n^2)$ |
| `degree(v)` | $O(n)$ |

### 邻接表：
| 操作 | 时间复杂度 |
|------|------------|
| `get_edge(u, v)` | $O(\min(\deg(u), \deg(v)))$ |
| `insert_vertex` | $O(1)$ |
| `remove_vertex` | $O(\deg(v))$ |
| `degree(v)` | $O(1)$ 或 $O(\deg(v))$ |
